#:kivy 1.0.9

<TopMenuWidget>:
    pos_hint: {'top':1}
    save_btn: save_button
    load_btn: load_button
    clear_btn: clear_button
    config_btn: config_button
    pause_btn: pause_button
    ActionView:
        use_separator: True
        ActionPrevious:
            title: 'Self-Driving Car'
            with_previous: False
        ActionButton:
            id: pause_button
            text: 'Pause/Play'
        ActionButton:
            id: save_button
            text: 'Save'
        ActionButton:
            id: load_button
            text: 'Load'
        ActionButton:
            id: clear_button
            text: 'Clear'
        ActionButton:
            id: config_button
            text: 'Configuration'

<Separator@Widget>:
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

<HSeparator@Separator>:
    size_hint_y: None
    height: dp(2)

<VSeparator@Separator>:
    size_hint_x: None
    width: dp(2)

<ConfigValueWidget>:
    orientation: 'horizontal'
    inner_label:config_label
    inner_input:text_input
    text:'set this'
    value: '0'
    size_hint: (1, None)
    height: 50
    pos_hint: {'top': 1}
    Label:
        id:config_label
        text: self.parent.text
    TextInput:
        id:text_input
        multiline: False
        text: self.parent.value

<ConfigurationTitle@Label>:
    pos_hint: {'left': 1}
    size_hint: (1, None)
    height: 50

<ConfigurationWidget>:
    orientation: 'vertical'
    save_btn: save_button
    cancel_btn: cancel_button

    dqn_gamma: gamma_rate
    dqn_neurons: hidden_neurons
    dqn_learning: learning_rate
    dqn_temperature: temperature
    dqn_sample: sample_size

    reward_decay: decay_reward
    reward_distance: distance_reward

    pos_hint:{'top': 1}

    ConfigurationTitle:
        text: 'DQN Configuration'
    HSeparator
    BoxLayout:
        orientation: 'vertical'
        ConfigValueWidget:
            id:gamma_rate
            text: 'Gamma'
            value: '0'
        ConfigValueWidget:
            id:hidden_neurons
            text: 'NB Hidden Neurons'
            value: '0'
        ConfigValueWidget:
            id:learning_rate
            text: 'Learning Rate'
            value: '0'
        ConfigValueWidget:
            id:temperature
            text: 'Temperature'
            value: '0'
        ConfigValueWidget:
            id:sample_size
            text: 'Sample Size'
            value: '0'
    ConfigurationTitle:
        text: 'Rewards Configuration'
    HSeparator
    BoxLayout:
        orientation: 'vertical'
        ConfigValueWidget:
            id:decay_reward
            text: 'Decay Reward'
            value: '0'
        ConfigValueWidget:
            id:distance_reward
            text: 'Distance Reward'
            value: '0'
    HSeparator
    BoxLayout:
        pos_hint: {'bottom': 1}
        orientation: 'horizontal'
        size_hint: (1, None)
        height: 50
        Button:
            id: save_button
            text: 'Save'
        Button:
            id: cancel_button
            text: 'Cancel'

<RootWidget>:
    orientation: 'vertical'

<Car>:
    size_hint: (None, None)
    width: 20
    height: 10
    canvas:
        PushMatrix
        Rotate:
            angle: self.angle
            origin: self.center
        Rectangle:
            pos: self.pos
            size: self.size
        PopMatrix

<Ball1>:
    size_hint: (None, None)
    width: 10
    height: 10
    canvas:
        Color:
            rgba: 1,0,0,1
        Ellipse:
            pos: self.pos
            size: self.size
<Ball2>:
    size_hint: (None, None)
    width: 10
    height: 10
    canvas:
        Color:
            rgba: 0,1,1,1
        Ellipse:
            pos: self.pos
            size: self.size

<Ball3>:
    size_hint: (None, None)
    width: 10
    height: 10
    canvas:
        Color:
            rgba: 1,1,0,1
        Ellipse:
            pos: self.pos
            size: self.size

<Game>:
    car: game_car
    ball1: game_ball1
    ball2: game_ball2
    ball3: game_ball3
    top_image: top_goal

    Car:
        id: game_car
        center: self.parent.center
    Ball1:
        id: game_ball1
        center: self.parent.center
    Ball2:
        id: game_ball2
        center: self.parent.center
    Ball3:
        id: game_ball3
        center: self.parent.center
    Image:
        size_hint: (None, None)
        width: 100
        height: 100
        id: top_goal
        source: 'assets/top_goal.png'
